<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Rozette</title>

  <!-- External CSS -->
  <link rel="stylesheet" href="assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/css/font-awesome.min.css">
  <link rel="stylesheet" href="assets/css/owl.carousel.css">
  <link rel="stylesheet" href="assets/css/owl.transitions.css">
  <link rel="stylesheet" href="assets/css/magnific-popup.css">
  <link rel="stylesheet" href="assets/css/apps.css">
  <link rel="stylesheet" href="assets/css/plyr.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/responsive.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://code.responsivevoice.org/responsivevoice.js"></script>
</head>

<body class="page">

        <!-- Track List -->
        <div class="section tracks-section text-white">
            <div class="overlay section-padding">
                <div class="container">
                    <div class="row">
                        <div class="col-md-8 col-md-offset-2 col-xs-12">
                            <div class="section-header text-center">
                                <h3 class="section-title">Tracklist</h3>
                                <p class="section-subtext">we trying hard to make your fresh mind we trying hard to make your fresh mind</p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="music-wrap">
                                <div class="row">
                                    <div class="col-md-4 col-sm-5 col-xs-6">
                                        <div id="player-one" class="player-main-block">
                                            <div class="album-art-block">
                                                <div class="track-meta-info" id="meta-container">
                                                    <span class="song-name" amplitude-song-info="name" amplitude-main-song-info="true"></span>
                                                    <div class="song-artist-album">
                                                        - <span amplitude-song-info="artist" amplitude-main-song-info="true"></span>
                                                    </div>
                                                </div>
                                                <div class="album-art-space">
                                                    <img class="img-responsive" amplitude-song-info="cover_art_url" amplitude-main-song-info="true" alt="..." />
                                                </div>
                                            </div>
                                            <div id="amplitude-left" class="audio-controller-wrap">
                                                <div id="player-left-bottom">

                                                    <div class="time-controller-block" id="time-container">
                                                        <div class="input-range-block">
                                                            <span class="current-time">
												            <span class="amplitude-current-minutes" amplitude-main-current-minutes="true"></span>:<span class="amplitude-current-seconds" amplitude-main-current-seconds="true"></span>
                                                            </span>
                                                            <div class="track-progress-wrap">
                                                                <input type="range" class="amplitude-song-slider full-width" min="1" max="100" step="1" amplitude-main-song-slider="true" />
                                                                <div class="track-progress"></div>
                                                            </div>
                                                            <span class="duration">
												            <span class="amplitude-duration-minutes" amplitude-main-duration-minutes="true"></span>:<span class="amplitude-duration-seconds" amplitude-main-duration-seconds="true"></span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div id="control-container" class="control-container">
                                                        <div id="central-control-container">
                                                            <div id="central-controls" class="audio-controller-block">
                                                                <div class="controller-common amplitude-prev" id="previous"></div>
                                                                <div class="controller-common amplitude-play-pause play-pause-btn" amplitude-main-play-pause="true" id="play-pause"></div>
                                                                <div class="controller-common amplitude-next" id="next"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="player-footer">
                                                        <div class="volume-container">
                                                            <i class="fa fa-volume-down" aria-hidden="true"></i>
                                                            <input type="range" class="amplitude-volume-slider volume-slider-one" />
                                                            <i class="fa fa-volume-up" aria-hidden="true"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-8 col-sm-7 col-xs-6">
                                        <div class="player-track-list-block">
                                            <div class="song amplitude-song-container amplitude-play-pause" amplitude-song-index="0" data-song="audio/01-title-staff-roll.mp3" data-cover="images/album-art/1.jpg">
                                                <div class="song-meta-data">
                                                    <span class="song-title">One Dance</span>
                                                    <span class="song-artist">DRAKE FT WIZKID &amp; KYLA</span>
                                                </div>
                                                <div class="play-now">
                                                    <a class="btn btn-sm btn-black"><span class="normal-state">Play Now</span><span class="play-state">Pause</span></a>
                                                </div>
                                            </div>
                                            <div class="song amplitude-song-container amplitude-play-pause" amplitude-song-index="1" data-song="audio/02-into-the-dark-night.mp3" data-cover="images/album-art/2.jpg">
                                                <div class="song-meta-data">
                                                    <span class="song-title">7 YEARS</span>
                                                    <span class="song-artist">LUKAS GRAHAM</span>
                                                </div>
                                                <div class="play-now">
                                                    <a class="btn btn-sm btn-black"><span class="normal-state">Play Now</span><span class="play-state">Pause</span></a>
                                                </div>
                                            </div>
                                            <div class="song amplitude-song-container amplitude-play-pause" amplitude-song-index="2" data-song="audio/03-earth.mp3" data-cover="images/album-art/3.jpg">
                                                <div class="song-meta-data">
                                                    <span class="song-title">CHEAP THRILLS</span>
                                                    <span class="song-artist">SIA</span>
                                                </div>
                                                <div class="play-now">
                                                    <a class="btn btn-sm btn-black"><span class="normal-state">Play Now</span><span class="play-state">Pause</span></a>
                                                </div>
                                            </div>
                                            <div class="song amplitude-song-container amplitude-play-pause" amplitude-song-index="3" data-song="audio/04-star-wars-title.mp3" data-cover="images/album-art/4.jpg">
                                                <div class="song-meta-data">
                                                    <span class="song-title">I TOOK A PILL IN IBIZA</span>
                                                    <span class="song-artist">MIKE POSNER</span>
                                                </div>
                                                <div class="play-now">
                                                    <a class="btn btn-sm btn-black"><span class="normal-state">Play Now</span><span class="play-state">Pause</span></a>
                                                </div>
                                            </div>
                                            <div class="song amplitude-song-container amplitude-play-pause" amplitude-song-index="4" data-song="audio/08 The Gun.mp3" data-cover="images/album-art/5.jpg">
                                                <div class="song-meta-data">
                                                    <span class="song-title">THIS IS WHAT YOU CAME FOR</span>
                                                    <span class="song-artist">CALVIN HARRIS FT RIHANNA</span>
                                                </div>
                                                <div class="play-now">
                                                    <a class="btn btn-sm btn-black"><span class="normal-state">Play Now</span><span class="play-state">Pause</span></a>
                                                </div>
                                            </div>
                                            <div class="song amplitude-song-container amplitude-play-pause" amplitude-song-index="5" data-song="audio/interlude.mp3" data-cover="images/album-art/6.jpg">
                                                <div class="song-meta-data">
                                                    <span class="song-title">LUSH LIFE</span>
                                                    <span class="song-artist">ZARA LARSSON</span>
                                                </div>
                                                <div class="play-now">
                                                    <a class="btn btn-sm btn-black"><span class="normal-state">Play Now</span><span class="play-state">Pause</span></a>
                                                </div>
                                            </div>
                                            <div class="song amplitude-song-container amplitude-play-pause" amplitude-song-index="6" data-song="audio/01-title-staff-roll.mp3" data-cover="images/album-art/7.jpg">
                                                <div class="song-meta-data">
                                                    <span class="song-title">CLOSER</span>
                                                    <span class="song-artist">CHAINSMOKERS FT HALSEY</span>
                                                </div>
                                                <div class="play-now">
                                                    <a class="btn btn-sm btn-black"><span class="normal-state">Play Now</span><span class="play-state">Pause</span></a>
                                                </div>
                                            </div>
                                            <div class="song amplitude-song-container amplitude-play-pause" amplitude-song-index="7" data-song="audio/02-into-the-dark-night.mp3" data-cover="images/album-art/8.jpg">
                                                <div class="song-meta-data">
                                                    <span class="song-title">LOVE YOURSELF</span>
                                                    <span class="song-artist">JUSTIN BIEBER</span>
                                                </div>
                                                <div class="play-now">
                                                    <a class="btn btn-sm btn-black"><span class="normal-state">Play Now</span><span class="play-state">Pause</span></a>
                                                </div>
                                            </div>
                                            <div class="song amplitude-song-container amplitude-play-pause" amplitude-song-index="8" data-song="audio/03-earth.mp3" data-cover="images/album-art/9.jpg">
                                                <div class="song-meta-data">
                                                    <span class="song-title">WORK</span>
                                                    <span class="song-artist">RIHANNA FT DRAKE</span>
                                                </div>
                                                <div class="play-now">
                                                    <a class="btn btn-sm btn-black"><span class="normal-state">Play Now</span><span class="play-state">Pause</span></a>
                                                </div>
                                            </div>
                                            <div class="song amplitude-song-container amplitude-play-pause" amplitude-song-index="9" data-song="audio/04-star-wars-title.mp3" data-cover="images/album-art/10.jpg">
                                                <div class="song-meta-data">
                                                    <span class="song-title">CAN'T STOP THE FEELING</span>
                                                    <span class="song-artist">JUSTIN TIMBERLAKE</span>
                                                </div>
                                                <div class="play-now">
                                                    <a class="btn btn-sm btn-black"><span class="normal-state">Play Now</span><span class="play-state">Pause</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Track List End -->


    </div>

   

    <!-- Script -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/owl.carousel.js"></script>
    <script src="assets/js/imagesloaded.pkgd.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/plyr.js"></script>
    <script src="assets/js/jquery.ajaxchimp.min.js"></script>
    <script src="assets/js/isotope.pkgd.min.js"></script>
    <script src="assets/js/jquery.countdown.min.js"></script>
    <script src="assets/js/tether.min.js"></script>
    <script src="assets/js/jquery.slimscroll.min.js"></script>
    <script src="assets/js/amplitude.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAmiJjq5DIg_K9fv6RE72OY__p9jz0YTMI"></script>
    <script src="js/map.js"></script>
    <script src="js/custom.js"></script>
</body>

<body>
  <div id="addSheet">
    <a href="/getSheet.html"> Maak eigen Rozette pagina </a>
  </div>
  <div class="container">
    <h1> Rozette </h1>

    <div class="languages"></div>
    <br>

    <div class="row">
      <div class="col-md-8">
        <form>
          <input type="text" id="search" name="search" placeholder="Zoek">
        </form>
        <div class="table-responsive-vertical shadow-z-1">
          <table id="translations" class="translations table table-hover table-mc-light-grey table-bordered" style="width:100%">
          </table>
        </div>
      </div>
      <div class="col-md-4">
        <div class="affix">
        </div>
      </div>
    </div>
  </div>
<!-- <script>
  (function($) {
    var element = $('.follow-scroll'),
        originalY = element.offset().top;

    // Space between element and top of screen (when scrolling)
    var topMargin = 20;

    // Should probably be set in CSS; but here just for emphasis
    element.css('position', 'relative');

    $(window).on('scroll', function(event) {
        var scrollTop = $(window).scrollTop();

        element.stop(false, false).animate({
            top: scrollTop < originalY
                    ? 0
                    : scrollTop - originalY + topMargin
        }, 300);
    });
})(jQuery);
</script> -->
<script>
  var currentLang = "en";
  var voices = new Map(); //map countrycode -> name of corresponding voice
  var translations = {};

  function getSheet(url){
    $.getJSON(url, function(data) {

      var entry = data.feed.entry;

      // $( ".translationshead" ).append( "<th>Nederlands</th>"); 
      var i = 0;

      $(entry).each(function(index, element){
        if(voices.size == 0){
          console.log(this.content.$t.split(", "));
    
          this.content.$t.split(", ").forEach(function(el) {
            voices.set((el.split(": "))[0] ,(el.split(": "))[1]);
            $(".languages").append("<a class='language' href='' onclick='return false;'>"+(el.split(": "))[0])+"</a>";
            // $( ".translationshead" ).append( "<th>"+(el.split(": "))[1]+"</th>");
            //console.log((el.split(": "))[1]);
          });
        }
        else{
          var title = this.title.$t.replace(/[^ -~]+/g, "").replace(/(\r\n|\n|\r)/gm,"").trim();
          var s = "<td><a class='say' href=#"+(i++)+">" + title + "</a></td>";
          translations[title] = {};
          //console.log(this.content.$t.split(", "));
          this.content.$t.split(", ").forEach(function(el) {
            translations[title][(el.split(": "))[0]] = (el.split(": "))[1];
            // text = (el.split(": "))[1];
            // s += '<td data-title="'+voices.get((el.split(": "))[0])+'"> <a href="#"><i class="say fa fa-play-circle" style="font-size:48px;color:black" lang="'+(el.split(": "))[0]+'" data-text="'+text+'" ></i><audio class= rel="noreferrer" hidden></audio></a></td>';
          });
    
          $( ".translations" ).append( "<tr>" + s + "</tr>" );
          // console.log(this.title.$t);
          // console.log(this.content.$t);
        }
      });
    }).fail(function(){
      console.log("Loading spreadsheet failed.");
    });

  }

  window.onload = function(e){
    var $rows = $('#translations').find('tr');
      $('#search').keyup(function() {
        $rows = $('#translations').find('tr');
        var val = '^(?=.*\\b' + $.trim($(this).val()).split(/\s+/).join('\\b)(?=.*\\b') + ').*$',
            reg = RegExp(val, 'i'),
            text;

        $rows.show().filter(function() {
            text = $(this).text().replace(/\s+/g, ' ');
            return !reg.test(text);
        }).hide();
      });
  }

  function querySt(ji) {
    hu = window.location.search.substring(1); 
    gy = hu.split("&");

    for (i=0;i<gy.length;i++) { 
      ft = gy[i].split("="); 
      if (ft[0] == ji) { 
        return ft[1]; 
      } 
    } 
  }

	// ID of the Google Spreadsheet
 var defaultSheetID = "1gsdlh7rZmZeC2rYBS16b3g1Z5kJ1AkiZRT9_sTJgBz4"

 var spreadsheetID = defaultSheetID;

  var query = "undefined";
  var queries = ["sheet", "key"];
  var i = 0;
  queries.every(function(q){
    query = decodeURIComponent(querySt(q));
    if(query!="undefined"){
      spreadsheetID = query;
      return false;
    }
    else{
      return true;
    }
  });

  // Make sure it is public or set to Anyone with link can view 
  var url = "https://spreadsheets.google.com/feeds/list/" + spreadsheetID + "/od6/public/values?alt=json";

  getSheet(url);
  

  // var voicelist = responsiveVoice.getVoices();
  // voicelist.forEach(function(voice){
  //   console.log('case "en": row[i] = "'+voice.name+'"; break;');
  // })

 // $(function(){
  // $('a.say').on('click', function(e){
  //   console.log("clicked");
  // })
 // });

  document.addEventListener('click', function (e) {
    if (hasClass(e.target, 'say')) {
        e.preventDefault();
        var targetElement = e.target || event.srcElement;
        // $(targetElement).toggleClass("fa-play-circle-o fa-play-circle");
        var text = $(targetElement).text();
        // console.log(Object.keys(translations).find(text));
        var translation = translations[text][currentLang];
        responsiveVoice.speak(translation, voices.get(currentLang), {onend: function(){
          // $(targetElement).toggleClass("fa-play-circle fa-play-circle-o");
        }});

        // var text = encodeURIComponent($(targetElement).text());
        // var url = "http://translate.google.com/translate_tts?tl="+lang+"&q="+text+"&client=t";
        // console.log(url);
        // var referrer = "http://translate.google.com/";
        // $.ajax({
        //   type: 'GET',
        //   url: url,
        //   xhrFields: {
        //     withCredentials: false
        //   },
        //   headers: {
        //     'X-Alt-Referer': referrer, 
        //     'Access-Control-Allow-Origin': '*',
        //     'Access-Control-Allow-Origin': 'http://translate.google.com/',
        //     'Access-Control-Allow-Methods': "GET, OPTIONS",
        //     'Access-Control-Allow-Headers': "Authorization, X-Requested-With, Content-Type, Origin, Accept",
        //     'Access-Control-Allow-Credentials': "true"
        //   },
        //   success: function(data) {
        //     var audioElement = $(targetElement).find("audio:first");
        //     audioElement.attr('src', data);
        //     audioElement.get(0).load();
        //     audioElement.get(0).play();
        //   },
        //   error: function() {
        //   }
        // });
        // $(targetElement).find("audio:first").attr('src', url).get(0).play();
    } else if (hasClass(e.target, 'language')) {
      e.preventDefault();
      var targetElement = e.target || event.srcElement;
      currentLang = $(targetElement).text();
      console.log(currentLang);
    }
}, false);

  function hasClass(elem, className) {
    return elem.className.split(' ').indexOf(className) > -1;
}
</script>

</body>